DDOTS RESTful API Server
========================

This project aims to provide RESTful (HTTP) API for DDOTS (Dockerized
Distributed Olympiad Testing System).

We use Swagger.io to present an interactive documentation, so run the server
and proceed to http://127.0.0.1:5000/v1/spec.html


Clone the Project
-----------------

```bash
$ git clone --recurse-submodules https://github.com/frol/ddots-api-server.git
```


Setup Environment
-----------------

It is recommended to use Docker, virtualenv, or Anaconda/Miniconda to manage
Python dependencies. Please, learn details yourself. Docker image will be
probably available later.

You will need `invoke` package to work with everything related to this project.

```bash
$ pip install invoke
```

Once you have invoke, you can learn all available commands related to this
project from:

```bash
$ invoke --list
```

Invoke tasks will prepare automatically everything that is required once you
run the application server.


Run Server
----------

```bash
$ invoke app.run
```


Run SeaweedFS
-------------

DDOTS API Server uses [SeaweedFS](https://github.com/chrislusf/seaweedfs) to
store tests for problems and solution source codes. Thus, SeaweedFS is
required.

You may run SeaweedFS locally following
[the official documentation](https://github.com/chrislusf/seaweedfs#example-usage),
or you may use Docker containers, in which case you may use Docker Compose
(its config is in `deploy/docker-compose.yml`).


Run DDOTS with SeaweedFS in Docker Containers
---------------------------------------------

You should have Docker and Docker Compose installed on your computer. Once that
is in place, run the following commands:

```bash
$ cd ./deploy
$ docker-compose up --build
```

You will need to edit `deploy/docker-compose.yml` if you want to enable
persistent storage (otherwise, updating/recreating Docker containers will wipe
all the data). Follow the instructions in the `docker-compose.yml` file.


Quickstart
----------

Open online interactive API documentation:
http://127.0.0.1:5000/api/v1/

Autogenerated swagger config is always available from
http://127.0.0.1:5000/api/v1/swagger.json
